# 小助手技术文档

## 一、核心定义

**小助手**  
基于大语言模型的智能代理，通过以下方式响应用户需求：

- 语义理解与分析
- 知识库检索
- 插件调用
- 结构化结果生成

## 二、关键概念

### 1. 提示词（Prompt）

**作用**：引导模型输出的指令模板  
**案例**：

```markdown
提示词：将以下文本翻译为英语
用户输入：最近不能吃辣...
小助手输出：Recently I can't eat spicy...
```

### 2. 上下文（Context）

**实现方式**：
集成知识库作为检索上下文，工作流程：

1. 用户提问 → 2. 知识库检索 → 3. 相关段落注入上下文 → 4. 模型生成回答

**应用示例**：
涂鸦小程序开发场景中，当询问"如何分享页面"时，自动注入相关开发文档片段。

### 3. 插件（Plugin）

**功能扩展**：通过 API 集成实现特定能力
**典型工作流**：

1. 会议室预定请求 → 2. 查询空闲会议室 → 3. 获取参会人 ID → 4. 创建会议

## 三、知识库管理

### 1. 数据处理流程

| 步骤 | 配置项   | 说明                |
| ---- | -------- | ------------------- |
| 分段 | 最大长度 | 建议 ≤2000 字符     |
|      | 重叠长度 | 建议 10-25%分段长度 |
| 清洗 | 替换规则 | 处理连续空格/换行符 |
|      | 删除规则 | 移除 URL/邮箱等     |

### 2. 配置策略

- **自动模式**：采用默认分段规则（`\n`为分隔符）
- **自定义模式**：支持正则表达式等高级配置

## 四、典型案例

### 案例 1：表格化输出

```markdown
提示词：返回表格格式
输出：
| 套餐 | 主菜 | 配菜 |
|--------|----------------|-----------|
| 套餐 A | 蒜香鸡胸肉 | 蒸西兰花 |
```

### 案例 2：插件协同

```markdown
用户请求：明天 14 点预定 11 楼会议室
插件执行：

1. 查询会议室可用性
2. 验证参会人信息
3. 创建会议事件
```

## 五、最佳实践建议

1. 知识库文档应保持版本更新
2. 复杂任务建议采用"插件+知识库"组合方案
3. 提示词需明确输出格式要求

优化要点说明：

1. 采用清晰的层级结构（H2/H3 标题）
2. 使用表格展示配置参数
3. 代码块隔离案例演示
4. 移除冗余的描述性文字
5. 标准化术语表述（如统一使用"插件"而非混合使用"Plugin"）
6. 增加实践建议章节
7. 优化中英文混排的空格格式
